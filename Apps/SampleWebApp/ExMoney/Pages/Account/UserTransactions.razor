@page "/account/transactions"
@layout PagesLayout

@inject IExMoneyTransactionsApi transactionsApi
@inject IExMoneyUsersApi usersApi



<style>
    #wrapper {
        position: absolute;
        height: 100%;
        width: 100%;
        margin-left: 0 !important;
    }

    .panels {
        position: relative;
        height: 100%;
        min-height: 100%;
        width: 100%;
        min-width: 100%;
        z-index: 1000;
    }

    #b {
        top: 115px;
        min-width: 100%;
        width: 100%;
    }

    .text-transparent {
        color: transparent;
    }

    #ex1 {

        overflow-x: scroll;
        max-width: 100%;
        width: 100%;
    }
</style>


<div id="wrapper">

    <UiTitleDisplay>
        <UiTitle>
            <div class="fs-1 text-center"> <span class="fas fa-exchange-alt me-2"></span> Transactions</div>
        </UiTitle>
        <AdditionnalContent>
            @if (Transactions is null)
            {
                <SpinnerLoader />
            }
            else
            {
                <span class="badge bg-black text-black fs-6 rounded-pill">
                    <div class="text-center text-white">Total: @Transactions.Count</div>
                </span>
            }
        </AdditionnalContent>
    </UiTitleDisplay>

    <div id="b" class="panels border-top border-dark rounded-9 shadow-lg bg-light">
        <div class="container">
            <div class="row mt-3">
                <div class="col">
                    <div>
                        @* Tabs navs *@
                        <ul class="nav nav-justified nav-tabs mb-3" id="ex1" role="tablist">
                            <li class="nav-item" role="presentation">
                                <a class="nav-link active text-success fs-6" id="ex1-tab-1" data-mdb-toggle="tab" href="#ex1-tabs-1"
                                    role="tab" aria-controls="ex1-tabs-1" aria-selected="true">
                                    <span class="fas fa-fire"></span> En Cours
                                </a>
                            </li>
                            <li class="nav-item" role="presentation">
                                <a class="nav-link fs-6 text-black" id="ex1-tab-2" data-mdb-toggle="tab" href="#ex1-tabs-2" role="tab"
                                    aria-controls="ex1-tabs-2" aria-selected="false">
                                    <span class="fas fa-sort-amount-up me-2"></span> Tout
                                </a>
                            </li>
                        </ul>
                        @* Tabs navs  *@

                        @* Tabs content  *@
                        <div class="tab-content" id="ex1-content">
                            <div class="tab-pane fade show active" id="ex1-tabs-1" role="tabpanel"
                                aria-labelledby="ex1-tab-1">
                                En cours
                            </div>
                            <div class="tab-pane fade" id="ex1-tabs-2" role="tabpanel" aria-labelledby="ex1-tab-2">
                                Tab 2 content
                            </div>
                            <div class="tab-pane fade" id="ex1-tabs-3" role="tabpanel" aria-labelledby="ex1-tab-3">
                                Toutes
                            </div>
                        </div>
                        @* Tabs content  *@
                    </div>
                </div>
            </div>

            <div class="row">
                <span class="text-transparent">exmoney</span>
            </div>
        </div>
    </div>
</div>

@code {

    public List<Transaction> Transactions { get; set; }

    protected override async Task OnInitializedAsync()
    {
        const string userId = "0f31b521-f866-4442-984b-cd85a9ee7a8f";
        var response = await transactionsApi.ListLastest(userId);
        if (response.IsSuccessStatusCode)
        {
            Transactions = response.Content!;
            StateHasChanged();
        }
    }
}
